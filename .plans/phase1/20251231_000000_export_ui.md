# Issue #23: エクスポート UI 実装計画

**作成日時**: 2025-12-31 00:00
**Issue**: #23 エクスポート UI
**ブランチ**: `feature/#23-export-ui`

## 概要

データエクスポートの UI を実装する。COCO 形式と YOLO 形式の選択・ダウンロード機能を提供。

## 完了条件

- エクスポート形式を選択できる
- エクスポートを実行してダウンロードできる

## 既存実装

### Backend API (実装済み)

| メソッド | エンドポイント | 説明 |
|----------|----------------|------|
| GET | `/api/v1/projects/{project_id}/export/coco` | COCO 形式エクスポート |
| GET | `/api/v1/projects/{project_id}/export/yolo` | YOLO 形式エクスポート |

### COCO レスポンス形式
```json
{
  "info": { ... },
  "licenses": [],
  "images": [...],
  "annotations": [...],
  "categories": [...]
}
```

### YOLO レスポンス形式
```json
{
  "data_yaml": "names:\n  0: person\nnc: 1\n",
  "annotations": {
    "frame_001.txt": "0 0.5 0.5 0.1 0.2\n",
    ...
  }
}
```

## 実装ファイル一覧

### 新規作成

| ファイル | 説明 |
|----------|------|
| `frontend/src/lib/api/export.ts` | エクスポート API クライアント |
| `frontend/src/app/(protected)/projects/[id]/export/page.tsx` | エクスポートページ |
| `frontend/src/app/(protected)/projects/[id]/export/actions.ts` | Server Actions |
| `frontend/src/app/(protected)/projects/[id]/export/components/export-form.tsx` | エクスポートフォーム |
| `frontend/src/components/ui/radio-group.tsx` | shadcn/ui RadioGroup |

### 修正

| ファイル | 説明 |
|----------|------|
| `frontend/src/app/(protected)/projects/[id]/page.tsx` | エクスポートボタン追加 |

## 実装順序

### Step 1: UIコンポーネント追加

```bash
cd frontend && pnpm dlx shadcn@latest add radio-group
```

### Step 2: API クライアント

1. `lib/api/export.ts` - exportCOCO, exportYOLO 関数

### Step 3: エクスポートページ

2. `export/actions.ts` - Server Actions
3. `export/components/export-form.tsx` - フォームコンポーネント
4. `export/page.tsx` - ページコンポーネント

### Step 4: プロジェクトページ修正

5. `projects/[id]/page.tsx` にエクスポートボタン追加

## UI デザイン

```
+------------------------------------------------------------------+
| ← ダッシュボード / プロジェクト名                                   |
+------------------------------------------------------------------+
|                                                                   |
|  データエクスポート                                                 |
|                                                                   |
|  エクスポート形式を選択してください                                  |
|                                                                   |
|  +---------------------------+  +---------------------------+     |
|  |  ○ COCO Format           |  |  ○ YOLO Format           |     |
|  |                          |  |                          |     |
|  |  - annotations.json      |  |  - data.yaml             |     |
|  |  - 標準的な形式           |  |  - *.txt (各画像)         |     |
|  |  - 多くのツールで利用可能  |  |  - YOLOv5/v8 対応         |     |
|  +---------------------------+  +---------------------------+     |
|                                                                   |
|  [エクスポート実行]                                                 |
|                                                                   |
+------------------------------------------------------------------+
```

## ダウンロード方式

### COCO 形式
- JSON ファイルとして直接ダウンロード
- ファイル名: `{project_name}_coco.json`

### YOLO 形式
- クライアントサイドで ZIP 生成
- 含まれるファイル:
  - `data.yaml`
  - `labels/*.txt`
- ファイル名: `{project_name}_yolo.zip`

## 依存ライブラリ

### YOLO ZIP 生成用
```bash
pnpm add jszip file-saver
pnpm add -D @types/file-saver
```

## 注意事項

- 大規模プロジェクトの場合、エクスポートに時間がかかる可能性
- ローディング状態を適切に表示
- エラーハンドリングを実装
