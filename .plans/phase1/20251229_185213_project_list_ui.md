# Issue #24: プロジェクト一覧・作成 UI 実装計画

**作成日時**: 2025-12-29 18:52
**Issue**: #24 プロジェクト一覧・作成 UI
**ブランチ**: `feature/#24-project-list-ui`

## 概要

ダッシュボードにプロジェクト一覧表示と新規プロジェクト作成機能を実装する。

## 完了条件

- プロジェクト一覧が表示される
- 新規プロジェクトを作成できる

## 実装ファイル一覧

### 新規作成

| ファイル | 説明 |
|----------|------|
| `frontend/src/types/project.ts` | プロジェクト型定義 |
| `frontend/src/lib/api/client.ts` | API クライアント基盤 |
| `frontend/src/lib/api/projects.ts` | プロジェクト API クライアント |
| `frontend/src/components/ui/dialog.tsx` | shadcn/ui Dialog |
| `frontend/src/components/ui/textarea.tsx` | shadcn/ui Textarea |
| `frontend/src/app/(protected)/dashboard/components/project-card.tsx` | プロジェクトカード |
| `frontend/src/app/(protected)/dashboard/components/project-list.tsx` | プロジェクト一覧 |
| `frontend/src/app/(protected)/dashboard/components/create-project-dialog.tsx` | 作成ダイアログ |

### 修正

| ファイル | 説明 |
|----------|------|
| `frontend/src/app/(protected)/dashboard/page.tsx` | プロジェクト一覧表示を統合 |
| `frontend/src/app/(protected)/dashboard/actions.ts` | API 呼び出し Server Actions 追加 |

## 実装順序

### Step 0: 準備

1. ブランチ作成: `git checkout -b feature/#24-project-list-ui`
2. 計画書を `.plans/20251229_185213_project_list_ui.md` に保存

### Step 1: 型定義とAPI クライアント

1. `types/project.ts` - Backend スキーマと一致させた型定義
2. `lib/api/client.ts` - 認証付き fetch ラッパー
3. `lib/api/projects.ts` - getProjects, createProject 関数

### Step 2: UI コンポーネント追加

```bash
pnpm dlx shadcn@latest add dialog textarea
```

### Step 3: プロジェクトコンポーネント

4. `dashboard/components/project-card.tsx` - 個別カード表示
5. `dashboard/components/project-list.tsx` - カード一覧（グリッド）
6. `dashboard/components/create-project-dialog.tsx` - 作成ダイアログ（Client Component）

### Step 4: Server Actions と統合

7. `dashboard/actions.ts` に追加:
   - `getAccessToken()` - Supabase セッションから JWT 取得
   - `fetchProjects()` - プロジェクト一覧取得
   - `createProjectAction()` - プロジェクト作成

8. `dashboard/page.tsx` - プロジェクト一覧と作成ボタン統合

### Step 5: テスト

9. API クライアントテスト
10. Server Actions テスト
11. コンポーネントテスト

## 主要な型定義

```typescript
// types/project.ts
export interface Project {
  id: string;
  owner_id: string;
  name: string;
  description: string | null;
  status: "active" | "archived" | "deleted";
  settings: Record<string, unknown>;
  created_at: string;
  updated_at: string;
}

export interface ProjectCreate {
  name: string;
  description?: string | null;
}
```

## Backend API 仕様

| メソッド | エンドポイント | 説明 |
|----------|----------------|------|
| GET | `/api/v1/projects` | 一覧取得 (skip, limit) |
| POST | `/api/v1/projects` | 作成 (name, description) |

認証: `Authorization: Bearer <JWT>` (Supabase セッションから取得)

## 注意事項

- `NEXT_PUBLIC_API_URL` 環境変数でバックエンド URL を指定
- `revalidatePath("/dashboard")` でプロジェクト作成後に一覧を更新
- エラーハンドリングは日本語メッセージで統一
- frontend-design スキルを使用してデザイン品質を確保
