# Phase 2: AI Assist (AIæ”¯æ´æ©Ÿèƒ½) è©³ç´°è¨ˆç”»

**ä½œæˆæ—¥æ™‚**: 2026-01-03
**Phase**: 2 - AI Assist
**æœŸé–“ç›®æ¨™**: 3-4é€±é–“

---

## æ¦‚è¦

Phase 2 ã§ã¯ã€AI ã«ã‚ˆã‚‹**è‡ªå‹•ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³**ã¨**æ˜ åƒæ¤œç´¢æ©Ÿèƒ½**ã‚’å®Ÿè£…ã™ã‚‹ã€‚

### ç›®æ¨™
- ãƒ†ã‚­ã‚¹ãƒˆã‚¯ã‚¨ãƒªã§é¡ä¼¼ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’æ¤œç´¢ã§ãã‚‹
- é¸æŠã—ãŸãƒ•ãƒ¬ãƒ¼ãƒ ã«è‡ªå‹•ã§ãƒã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒœãƒƒã‚¯ã‚¹ã‚’ç”Ÿæˆã§ãã‚‹
- ä¿¡é ¼åº¦ã®ä½ã„ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ãã‚‹

### å®Œäº†åŸºæº–
- [ ] ã€Œcpuã€ã¨å…¥åŠ›ã™ã‚‹ã¨ CPU ãŒæ˜ ã£ãŸãƒ•ãƒ¬ãƒ¼ãƒ ãŒæ¤œç´¢ã§ãã‚‹
- [ ] é¸æŠã—ãŸãƒ•ãƒ¬ãƒ¼ãƒ ã«è‡ªå‹•ã§ãƒã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒœãƒƒã‚¯ã‚¹ãŒç”Ÿæˆã•ã‚Œã‚‹
- [ ] ä¿¡é ¼åº¦ã®ä½ã„ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ãã‚‹

---

## Phase 1 vs Phase 2: ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æ¯”è¼ƒ

### Phase 1 (ç¾çŠ¶): æ‰‹å‹•ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. æ˜ åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰                                          â”‚
â”‚    â””â”€â†’ è‡ªå‹•ã§ãƒ•ãƒ¬ãƒ¼ãƒ æŠ½å‡º (FFmpeg)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. ãƒ•ãƒ¬ãƒ¼ãƒ ä¸€è¦§ã‹ã‚‰æ‰‹å‹•ã§é¸æŠ                                â”‚
â”‚    â””â”€â†’ æ•°ç™¾ã€œæ•°åƒãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ç›®è¦–ã§ç¢ºèª ğŸ˜°                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. å„ãƒ•ãƒ¬ãƒ¼ãƒ ã§æ‰‹å‹•ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³                            â”‚
â”‚    â””â”€â†’ 1ã¤ãšã¤ãƒã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒœãƒƒã‚¯ã‚¹ã‚’æç”» ğŸ˜°               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. COCO/YOLO ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â±ï¸ æ‰€è¦æ™‚é–“: æ•°æ™‚é–“ã€œæ•°æ—¥ (ãƒ•ãƒ¬ãƒ¼ãƒ æ•°ã«æ¯”ä¾‹)
```

### Phase 2 (å®Ÿè£…å¾Œ): AIæ”¯æ´ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. æ˜ åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰                                          â”‚
â”‚    â””â”€â†’ è‡ªå‹•ã§ãƒ•ãƒ¬ãƒ¼ãƒ æŠ½å‡º (FFmpeg)                          â”‚
â”‚    â””â”€â†’ âœ¨ è‡ªå‹•ã§ç‰¹å¾´ãƒ™ã‚¯ãƒˆãƒ«æŠ½å‡º (SigLIP 2) [NEW]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. âœ¨ ãƒ†ã‚­ã‚¹ãƒˆæ¤œç´¢ã§ãƒ•ãƒ¬ãƒ¼ãƒ çµã‚Šè¾¼ã¿ [NEW]                   â”‚
â”‚    â”‚                                                         â”‚
â”‚    â”‚  æ¤œç´¢: "cpu"                                            â”‚
â”‚    â”‚     â†“                                                   â”‚
â”‚    â”‚  SigLIP 2 ãŒãƒ†ã‚­ã‚¹ãƒˆ â†’ ãƒ™ã‚¯ãƒˆãƒ«å¤‰æ›                     â”‚
â”‚    â”‚     â†“                                                   â”‚
â”‚    â”‚  pgvector ã§é¡ä¼¼ãƒ•ãƒ¬ãƒ¼ãƒ æ¤œç´¢                            â”‚
â”‚    â”‚     â†“                                                   â”‚
â”‚    â”‚  CPU ãŒæ˜ ã£ãŸ 50 ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’è¡¨ç¤º âœ…                      â”‚
â”‚    â”‚                                                         â”‚
â”‚    â””â”€â†’ ç›®çš„ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ç´ æ—©ãç™ºè¦‹ ğŸ˜Š                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. âœ¨ è‡ªå‹•ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ [NEW]                               â”‚
â”‚    â”‚                                                         â”‚
â”‚    â”‚  [è‡ªå‹•ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³] ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯                   â”‚
â”‚    â”‚     â†“                                                   â”‚
â”‚    â”‚  SAM 3 ãŒãƒ©ãƒ™ãƒ«åã‹ã‚‰ãƒã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒœãƒƒã‚¯ã‚¹ç”Ÿæˆ          â”‚
â”‚    â”‚     â†“                                                   â”‚
â”‚    â”‚  ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢ä»˜ãã§çµæœè¡¨ç¤º                             â”‚
â”‚    â”‚     â†“                                                   â”‚
â”‚    â”‚  50 ãƒ•ãƒ¬ãƒ¼ãƒ  Ã— å¹³å‡ 3 ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ = 150 ä»¶ã‚’è‡ªå‹•ç”Ÿæˆ âœ… â”‚
â”‚    â”‚                                                         â”‚
â”‚    â””â”€â†’ æ‰‹å‹•æç”»ä¸è¦ ğŸ˜Š                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. âœ¨ ãƒ¬ãƒ“ãƒ¥ãƒ¼ & ä¿®æ­£ [NEW]                                  â”‚
â”‚    â”‚                                                         â”‚
â”‚    â”‚  ä¿¡é ¼åº¦ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°                                  â”‚
â”‚    â”‚     â†“                                                   â”‚
â”‚    â”‚  ä¿¡é ¼åº¦ 90%ä»¥ä¸Š: 120ä»¶ â†’ ä¸€æ‹¬æ‰¿èª âœ…                    â”‚
â”‚    â”‚  ä¿¡é ¼åº¦ 70-90%: 25ä»¶ â†’ ç›®è¦–ç¢ºèªã—ã¦æ‰¿èª                 â”‚
â”‚    â”‚  ä¿¡é ¼åº¦ 70%æœªæº€: 5ä»¶ â†’ æ‰‹å‹•ä¿®æ­£                         â”‚
â”‚    â”‚                                                         â”‚
â”‚    â””â”€â†’ ç¢ºèªãŒå¿…è¦ãªã®ã¯ 30 ä»¶ã®ã¿ ğŸ˜Š                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. COCO/YOLO ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â±ï¸ æ‰€è¦æ™‚é–“: æ•°ååˆ†ã€œæ•°æ™‚é–“ (80%ä»¥ä¸Šã®å·¥æ•°å‰Šæ¸›)
```

---

## å…·ä½“çš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹: ã€ŒCPU ã‚’æ¤œå‡ºã™ã‚‹ãƒ¢ãƒ‡ãƒ«ã‚’ä½œã‚ŠãŸã„ã€

### Step 1: æ˜ åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ (æ—¢å­˜ + æ‹¡å¼µ)
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: å·¥å ´ãƒ©ã‚¤ãƒ³ã®æ˜ åƒ (10åˆ†) ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

ã‚·ã‚¹ãƒ†ãƒ :
  1. ãƒ•ãƒ¬ãƒ¼ãƒ æŠ½å‡º: 1fps â†’ 600ãƒ•ãƒ¬ãƒ¼ãƒ ç”Ÿæˆ
  2. [NEW] å„ãƒ•ãƒ¬ãƒ¼ãƒ ã®ç‰¹å¾´ãƒ™ã‚¯ãƒˆãƒ«æŠ½å‡º (SigLIP 2)
  3. [NEW] ãƒ™ã‚¯ãƒˆãƒ«ã‚’ pgvector ã«ä¿å­˜
```

### Step 2: ãƒ•ãƒ¬ãƒ¼ãƒ æ¤œç´¢ (æ–°æ©Ÿèƒ½)
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã« "cpu" ã¨å…¥åŠ›

ã‚·ã‚¹ãƒ†ãƒ :
  1. "cpu" ã‚’ãƒ†ã‚­ã‚¹ãƒˆãƒ™ã‚¯ãƒˆãƒ«ã«å¤‰æ› (SigLIP 2)
  2. pgvector ã§é¡ä¼¼åº¦æ¤œç´¢
  3. é¡ä¼¼åº¦ã®é«˜ã„é †ã« 50 ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’è¡¨ç¤º

ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€ŒãŠãŠã€CPU ãŒæ˜ ã£ãŸãƒ•ãƒ¬ãƒ¼ãƒ ã ã‘å‡ºã¦ããŸï¼ã€
```

### Step 3: è‡ªå‹•ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ (æ–°æ©Ÿèƒ½)
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼:
  1. æ¤œç´¢çµæœã‹ã‚‰ 50 ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’é¸æŠ
  2. ãƒ©ãƒ™ãƒ« "cpu" ã‚’æŒ‡å®š
  3. [è‡ªå‹•ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³] ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

ã‚·ã‚¹ãƒ†ãƒ :
  1. SAM 3 ãŒå„ãƒ•ãƒ¬ãƒ¼ãƒ ã§ "cpu" ã‚’æ¤œå‡º
  2. ãƒã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒœãƒƒã‚¯ã‚¹ + ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢ã‚’ç”Ÿæˆ
  3. 150 ä»¶ã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å€™è£œã‚’è¡¨ç¤º

ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œ150ä»¶ãŒæ•°åˆ†ã§ç”Ÿæˆã•ã‚ŒãŸï¼ã€
```

### Step 4: ãƒ¬ãƒ“ãƒ¥ãƒ¼ (æ–°æ©Ÿèƒ½)
```
ã‚·ã‚¹ãƒ†ãƒ : ä¿¡é ¼åº¦ã§ã‚°ãƒ«ãƒ¼ãƒ—åˆ†ã‘
  - é«˜ä¿¡é ¼åº¦ (90%+): 120ä»¶ â†’ ä¸€æ‹¬æ‰¿èªãƒœã‚¿ãƒ³
  - ä¸­ä¿¡é ¼åº¦ (70-90%): 25ä»¶ â†’ å€‹åˆ¥ç¢ºèª
  - ä½ä¿¡é ¼åº¦ (70%æœªæº€): 5ä»¶ â†’ è¦ä¿®æ­£

ãƒ¦ãƒ¼ã‚¶ãƒ¼:
  1. é«˜ä¿¡é ¼åº¦ 120ä»¶ã‚’ä¸€æ‹¬æ‰¿èª
  2. ä¸­ä¿¡é ¼åº¦ 25ä»¶ã‚’ç›®è¦–ç¢ºèªã—ã¦æ‰¿èª
  3. ä½ä¿¡é ¼åº¦ 5ä»¶ã‚’æ‰‹å‹•ä¿®æ­£

åˆè¨ˆä½œæ¥­: 30ä»¶ã®ç¢ºèª + 5ä»¶ã®ä¿®æ­£ (å¾“æ¥: 150ä»¶ã™ã¹ã¦æ‰‹å‹•)
```

### Step 5: ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ (æ—¢å­˜)
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: COCO å½¢å¼ã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

çµæœ: é«˜å“è³ªãªã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’çŸ­æ™‚é–“ã§å–å¾—
```

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | æŠ€è¡“ | å‚™è€ƒ |
|---------------|------|------|
| æ˜ åƒæ¤œç´¢ | SigLIP 2 + pgvector | Google DeepMind ã®æœ€æ–°ãƒ¢ãƒ‡ãƒ« |
| è‡ªå‹•ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ | SAM 3 | r2s2 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰æµç”¨å¯èƒ½ |
| ãƒ™ã‚¯ãƒˆãƒ« DB | pgvector (Supabase) | PostgreSQL æ‹¡å¼µ |
| SigLIP Worker | Celery + Docker (CUDA) | **å°‚ç”¨ã‚³ãƒ³ãƒ†ãƒŠ** (transformers stable) |
| SAM3 Worker | Celery + Docker (CUDA) | **å°‚ç”¨ã‚³ãƒ³ãƒ†ãƒŠ** (transformers dev) |

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ã‚³ãƒ³ãƒ†ãƒŠæ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Docker Environment                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚  Frontend  â”‚  â”‚  Backend   â”‚  â”‚   CPU Worker     â”‚                   â”‚
â”‚  â”‚  (Next.js) â”‚  â”‚  (FastAPI) â”‚  â”‚   (Celery)       â”‚                   â”‚
â”‚  â”‚            â”‚  â”‚            â”‚  â”‚                  â”‚                   â”‚
â”‚  â”‚  - UI      â”‚  â”‚  - REST APIâ”‚  â”‚  - ãƒ•ãƒ¬ãƒ¼ãƒ æŠ½å‡º  â”‚                   â”‚
â”‚  â”‚  - SSR     â”‚  â”‚  - èªè¨¼    â”‚  â”‚  - ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ  â”‚                   â”‚
â”‚  â”‚            â”‚  â”‚  - ã‚¿ã‚¹ã‚¯  â”‚  â”‚                  â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚        â”‚               â”‚                  â”‚                              â”‚
â”‚        â”‚               â–¼                  â–¼                              â”‚
â”‚        â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚        â”‚       â”‚             Redis                â”‚                     â”‚
â”‚        â”‚       â”‚        (Celery Broker)           â”‚                     â”‚
â”‚        â”‚       â”‚                                  â”‚                     â”‚
â”‚        â”‚       â”‚  Queues:                         â”‚                     â”‚
â”‚        â”‚       â”‚  - default (CPU ã‚¿ã‚¹ã‚¯)          â”‚                     â”‚
â”‚        â”‚       â”‚  - siglip  (SigLIP Worker)       â”‚                     â”‚
â”‚        â”‚       â”‚  - sam3    (SAM3 Worker)         â”‚                     â”‚
â”‚        â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚        â”‚                 â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”                                  â”‚
â”‚        â”‚                 â–¼           â–¼                                  â”‚
â”‚        â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚        â”‚       â”‚SigLIP Workerâ”‚ â”‚ SAM3 Worker â”‚  â† åˆ†é›¢ã‚³ãƒ³ãƒ†ãƒŠ          â”‚
â”‚        â”‚       â”‚   (GPU)     â”‚ â”‚   (GPU)     â”‚                          â”‚
â”‚        â”‚       â”‚             â”‚ â”‚             â”‚                          â”‚
â”‚        â”‚       â”‚ - ç‰¹å¾´æŠ½å‡º  â”‚ â”‚ - è‡ªå‹•ã‚¢ãƒãƒ†â”‚                          â”‚
â”‚        â”‚       â”‚ - æ¤œç´¢      â”‚ â”‚ - ãƒã‚¹ã‚¯ç”Ÿæˆâ”‚                          â”‚
â”‚        â”‚       â”‚             â”‚ â”‚             â”‚                          â”‚
â”‚        â”‚       â”‚ transformersâ”‚ â”‚ transformersâ”‚                          â”‚
â”‚        â”‚       â”‚ (stable)    â”‚ â”‚ (dev)       â”‚  â† ä¾å­˜é–¢ä¿‚åˆ†é›¢          â”‚
â”‚        â”‚       â”‚             â”‚ â”‚             â”‚                          â”‚
â”‚        â”‚       â”‚ Q: siglip   â”‚ â”‚ Q: sam3     â”‚                          â”‚
â”‚        â”‚       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚        â”‚              â”‚               â”‚                                  â”‚
â”‚        â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚        â”‚                      â–¼                                          â”‚
â”‚        â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚        â”‚            â”‚   Model Cache   â”‚                                  â”‚
â”‚        â”‚            â”‚    (Volume)     â”‚                                  â”‚
â”‚        â”‚            â”‚    /models/     â”‚                                  â”‚
â”‚        â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚        â”‚                                                                 â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚                                      â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Supabase  â”‚  â”‚  pgvector  â”‚  â”‚   MinIO    â”‚  â”‚            â”‚         â”‚
â”‚  â”‚ (Auth+DB)  â”‚  â”‚  (Vector)  â”‚  â”‚ (Storage)  â”‚  â”‚            â”‚         â”‚
â”‚  â”‚            â”‚  â”‚            â”‚  â”‚            â”‚  â”‚            â”‚         â”‚
â”‚  â”‚ PostgreSQL â”‚  â”‚ åŸ‹ã‚è¾¼ã¿   â”‚  â”‚ æ˜ åƒ/ãƒ•ãƒ¬ãƒ¼ãƒ â”‚  â”‚            â”‚         â”‚
â”‚  â”‚ èªè¨¼/RLS   â”‚  â”‚ ãƒ™ã‚¯ãƒˆãƒ«   â”‚  â”‚ ãƒ¢ãƒ‡ãƒ«     â”‚  â”‚            â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã‚³ãƒ³ãƒ†ãƒŠä¸€è¦§

| ã‚³ãƒ³ãƒ†ãƒŠ | ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ | å½¹å‰² | GPU |
|----------|---------------|------|-----|
| `frontend` | node:20 | Next.js UI | - |
| `backend` | python:3.12-slim | FastAPI REST API | - |
| `celery-worker` | python:3.12-slim | CPU ã‚¿ã‚¹ã‚¯ (FFmpegç­‰) | - |
| `siglip-worker` | nvidia/cuda:12.1 | SigLIP 2 æ¨è«– | **å¿…è¦** |
| `sam3-worker` | nvidia/cuda:12.1 | SAM 3 æ¨è«– | **å¿…è¦** |

### åˆ†é›¢ã®ãƒ¡ãƒªãƒƒãƒˆ

1. **ä¾å­˜é–¢ä¿‚ã®å®Œå…¨åˆ†é›¢** - SigLIP (transformers stable) ã¨ SAM3 (transformers dev) ã®ç«¶åˆå›é¿
2. **éšœå®³åˆ†é›¢** - ä¸€æ–¹ãŒã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã—ã¦ã‚‚ä»–ã«å½±éŸ¿ãªã—
3. **ç‹¬ç«‹ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°** - è² è·ã«å¿œã˜ã¦ Worker æ•°ã‚’èª¿æ•´å¯èƒ½
4. **GPU åŠ¹ç‡åŒ–** - Celery ãŒã‚¿ã‚¹ã‚¯ã‚’ã‚·ãƒªã‚¢ãƒ«å®Ÿè¡Œã— VRAM ç«¶åˆã‚’å›é¿

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```mermaid
flowchart TB
    subgraph Search["æ˜ åƒæ¤œç´¢ (SigLIP Worker)"]
        Query[ãƒ†ã‚­ã‚¹ãƒˆã‚¯ã‚¨ãƒª] --> SigLIP[SigLIP 2]
        SigLIP --> pgvector[(pgvector)]
        pgvector --> Results[é¡ä¼¼ãƒ•ãƒ¬ãƒ¼ãƒ ]
    end

    subgraph Annotation["è‡ªå‹•ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ (SAM3 Worker)"]
        Frame[ãƒ•ãƒ¬ãƒ¼ãƒ ç”»åƒ] --> SAM3[SAM 3]
        Labels[ãƒ©ãƒ™ãƒ«ãƒ†ã‚­ã‚¹ãƒˆ] --> SAM3
        SAM3 --> BBox[ãƒã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒœãƒƒã‚¯ã‚¹]
        SAM3 --> Mask[ã‚»ã‚°ãƒ¡ãƒ³ãƒˆãƒã‚¹ã‚¯]
    end
```

---

## æµç”¨å¯èƒ½ãªãƒªã‚½ãƒ¼ã‚¹

### r2s2/simulator ã‹ã‚‰ã®æµç”¨

| ãƒ•ã‚¡ã‚¤ãƒ« | ç”¨é€” | æµç”¨åº¦ |
|---------|------|-------|
| `docker/cloud/Dockerfile.sam3` | SAM3 Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ | **é«˜** - ã»ã¼ãã®ã¾ã¾ä½¿ç”¨å¯èƒ½ |
| `src/mask/sam3_interactive.py` | SAM3 ãƒ©ãƒƒãƒ‘ãƒ¼ã‚¯ãƒ©ã‚¹ | **é«˜** - API ã‚’å‚è€ƒã«å®Ÿè£… |
| `docs/SAM3_SAM3D_REFERENCE.md` | SAM3 æŠ€è¡“ä»•æ§˜æ›¸ | **é«˜** - å‚ç…§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ |
| `models/sam3/sam3.pt` | ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ« | **ä¸­** - HuggingFace ã‹ã‚‰å†å–å¾—æ¨å¥¨ |

### æ–°è¦å®Ÿè£…ãŒå¿…è¦

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | ç†ç”± |
|---------------|------|
| SigLIP 2 çµ±åˆ | éå»ã«ä½¿ç”¨çµŒé¨“ãªã— |
| pgvector è¨­å®š | Supabase ã¸ã®æ‹¡å¼µè¨­å®š |
| ç‰¹å¾´ãƒ™ã‚¯ãƒˆãƒ«æŠ½å‡º Worker | ãƒ•ãƒ¬ãƒ¼ãƒ å‡¦ç†ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ |
| æ¤œç´¢ UI | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æ–°è¦å®Ÿè£… |

---

## Issue åˆ†å‰²æ¡ˆ

### 2.1 GPU ç’°å¢ƒæ§‹ç¯‰ (infra)
- **SigLIP Worker ç”¨ Dockerfile ä½œæˆ** (`Dockerfile.siglip`)
  - transformers stable ç‰ˆ
  - Celery queue: `siglip`
- **SAM3 Worker ç”¨ Dockerfile ä½œæˆ** (`Dockerfile.sam3`)
  - transformers dev ç‰ˆ
  - Celery queue: `sam3`
- docker-compose.gpu.yml ã«ä¸¡ã‚µãƒ¼ãƒ“ã‚¹è¿½åŠ 
- ãƒ­ãƒ¼ã‚«ãƒ« GPU å¯¾å¿œ (CUDA 12.1+)
- ãƒ¢ãƒ‡ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç”¨å…±æœ‰ãƒœãƒªãƒ¥ãƒ¼ãƒ è¨­å®š

### 2.2 SigLIP 2 çµ±åˆ - Backend (backend)
- SigLIP 2 ãƒ¢ãƒ‡ãƒ«çµ±åˆ (Hugging Face transformers)
- ç”»åƒç‰¹å¾´ãƒ™ã‚¯ãƒˆãƒ«æŠ½å‡ºã‚µãƒ¼ãƒ“ã‚¹
- ãƒ†ã‚­ã‚¹ãƒˆç‰¹å¾´ãƒ™ã‚¯ãƒˆãƒ«æŠ½å‡ºã‚µãƒ¼ãƒ“ã‚¹
- ãƒ™ã‚¯ãƒˆãƒ«é¡ä¼¼åº¦è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯

### 2.3 pgvector è¨­å®š (infra)
- Supabase ã« pgvector æ‹¡å¼µã‚’æœ‰åŠ¹åŒ–
- frames ãƒ†ãƒ¼ãƒ–ãƒ«ã« embedding ã‚«ãƒ©ãƒ è¿½åŠ 
- ãƒ™ã‚¯ãƒˆãƒ«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ (IVFFlat/HNSW) è¨­å®š
- é¡ä¼¼æ¤œç´¢ SQL é–¢æ•°ä½œæˆ

### 2.4 ç‰¹å¾´ãƒ™ã‚¯ãƒˆãƒ«æŠ½å‡º Worker (backend)
- ãƒ•ãƒ¬ãƒ¼ãƒ æŠ½å‡ºæ™‚ã«è‡ªå‹•ã§ç‰¹å¾´ãƒ™ã‚¯ãƒˆãƒ«ã‚’ç”Ÿæˆ
- Celery ã‚¿ã‚¹ã‚¯ã¨ã—ã¦å®Ÿè£…
- ãƒãƒƒãƒå‡¦ç†å¯¾å¿œ
- é€²æ—çŠ¶æ³ã®ç®¡ç†

### 2.5 æ˜ åƒæ¤œç´¢ API (backend)
- ãƒ†ã‚­ã‚¹ãƒˆ â†’ é¡ä¼¼ãƒ•ãƒ¬ãƒ¼ãƒ æ¤œç´¢ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- æ¤œç´¢çµæœã®ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°
- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œ

### 2.6 æ˜ åƒæ¤œç´¢ UI (frontend)
- æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ UI
- æ¤œç´¢çµæœã‚°ãƒªãƒƒãƒ‰è¡¨ç¤º
- ãƒ•ãƒ¬ãƒ¼ãƒ é¸æŠã¨ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
- æ¤œç´¢å±¥æ­´

### 2.7 SAM 3 çµ±åˆ - Backend (backend)
- SAM 3 ãƒ¢ãƒ‡ãƒ«çµ±åˆ (r2s2 ã‹ã‚‰æµç”¨)
- ãƒ†ã‚­ã‚¹ãƒˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ â†’ ãƒã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒœãƒƒã‚¯ã‚¹ç”Ÿæˆ
- ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢ç®—å‡º
- ãƒã‚¹ã‚¯ç”Ÿæˆã‚ªãƒ—ã‚·ãƒ§ãƒ³

### 2.8 è‡ªå‹•ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ Worker (backend)
- Celery ã‚¿ã‚¹ã‚¯ã¨ã—ã¦å®Ÿè£…
- ãƒãƒƒãƒå‡¦ç†å¯¾å¿œ
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### 2.9 è‡ªå‹•ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ API (backend)
- ãƒ•ãƒ¬ãƒ¼ãƒ  + ãƒ©ãƒ™ãƒ« â†’ ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ç”Ÿæˆã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢ä»˜ããƒ¬ã‚¹ãƒãƒ³ã‚¹
- ä¸€æ‹¬å‡¦ç†å¯¾å¿œ

### 2.10 è‡ªå‹•ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ UI (frontend)
- ã€Œè‡ªå‹•ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã€ãƒœã‚¿ãƒ³
- é€²æ—è¡¨ç¤º
- çµæœãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼

### 2.11 ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ (frontend, backend)
- ä¿¡é ¼åº¦ã«ã‚ˆã‚‹ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- ä¸€æ‹¬æ‰¿èª UI
- ä¿®æ­£ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
- ãƒ¬ãƒ“ãƒ¥ãƒ¼é€²æ—è¡¨ç¤º

---

## å®Ÿè£…é †åº

```mermaid
gantt
    title Phase 2 å®Ÿè£…é †åº
    dateFormat  YYYY-MM-DD
    section ã‚¤ãƒ³ãƒ•ãƒ©
    GPUç’°å¢ƒæ§‹ç¯‰           :a1, 2026-01-06, 3d
    pgvectorè¨­å®š          :a2, after a1, 2d
    section Backend (SigLIP)
    SigLIP2çµ±åˆ           :b1, after a1, 4d
    ç‰¹å¾´ãƒ™ã‚¯ãƒˆãƒ«æŠ½å‡ºWorker :b2, after a2, 3d
    æ˜ åƒæ¤œç´¢API           :b3, after b2, 2d
    section Frontend (æ¤œç´¢)
    æ˜ åƒæ¤œç´¢UI            :c1, after b3, 3d
    section Backend (SAM3)
    SAM3çµ±åˆ              :d1, after a1, 3d
    è‡ªå‹•ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³Worker :d2, after d1, 2d
    è‡ªå‹•ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³API   :d3, after d2, 2d
    section Frontend (ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³)
    è‡ªå‹•ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³UI   :e1, after d3, 2d
    ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½          :e2, after e1, 3d
```

---

## æŠ€è¡“è©³ç´°

### SigLIP 2

#### ãƒ¢ãƒ‡ãƒ«é¸å®š
| ãƒ¢ãƒ‡ãƒ« | ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | VRAM | æ¨å¥¨ç”¨é€” |
|-------|-----------|------|---------|
| `google/siglip2-base-patch16-256` | 86M | ~2GB | é–‹ç™º/ãƒ†ã‚¹ãƒˆ |
| `google/siglip2-so400m-patch14-384` | 400M | ~4GB | **æœ¬ç•ªæ¨å¥¨** |
| `google/siglip2-giant-opt-patch16-256` | 1B | ~8GB | é«˜ç²¾åº¦è¦æ±‚æ™‚ |

#### ã‚³ãƒ¼ãƒ‰ä¾‹
```python
from transformers import AutoModel, AutoProcessor
import torch

model = AutoModel.from_pretrained("google/siglip2-so400m-patch14-384")
processor = AutoProcessor.from_pretrained("google/siglip2-so400m-patch14-384")

# ç”»åƒã‚¨ãƒ³ãƒ™ãƒ‡ã‚£ãƒ³ã‚°
inputs = processor(images=[image], return_tensors="pt")
with torch.no_grad():
    image_embeddings = model.get_image_features(**inputs)
# image_embeddings.shape: [1, 1152]

# ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ³ãƒ™ãƒ‡ã‚£ãƒ³ã‚°
text_inputs = processor(text=["cpu", "hdd"], padding="max_length", return_tensors="pt")
with torch.no_grad():
    text_embeddings = model.get_text_features(**text_inputs)
```

### SAM 3

#### r2s2 ã‹ã‚‰ã®æµç”¨æ–¹é‡
1. `Dockerfile.sam3` ã‚’ãƒ™ãƒ¼ã‚¹ã« Argus ç”¨ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
2. `sam3_interactive.py` ã® `SAM3Interactive` ã‚¯ãƒ©ã‚¹ã‚’å‚è€ƒã«å®Ÿè£…
3. ãƒ†ã‚­ã‚¹ãƒˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ã‚ˆã‚‹ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã‚’æ´»ç”¨

#### ä¸»è¦ API
```python
from sam3.model_builder import build_sam3_image_model
from sam3.model.sam3_image_processor import Sam3Processor

model = build_sam3_image_model()
processor = Sam3Processor(model)

# ç”»åƒè¨­å®š
inference_state = processor.set_image(image)

# ãƒ†ã‚­ã‚¹ãƒˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
output = processor.set_text_prompt(
    state=inference_state,
    prompt="cpu"  # ãƒ©ãƒ™ãƒ«å
)

masks = output["masks"]    # ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒã‚¹ã‚¯
boxes = output["boxes"]    # ãƒã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒœãƒƒã‚¯ã‚¹
scores = output["scores"]  # ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢
```

### pgvector

#### ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´
```sql
-- pgvector æ‹¡å¼µæœ‰åŠ¹åŒ–
CREATE EXTENSION IF NOT EXISTS vector;

-- frames ãƒ†ãƒ¼ãƒ–ãƒ«ã« embedding ã‚«ãƒ©ãƒ è¿½åŠ 
ALTER TABLE frames ADD COLUMN embedding vector(1152);

-- ãƒ™ã‚¯ãƒˆãƒ«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ (HNSW)
CREATE INDEX ON frames USING hnsw (embedding vector_cosine_ops);

-- é¡ä¼¼æ¤œç´¢é–¢æ•°
CREATE FUNCTION search_similar_frames(
    query_embedding vector(1152),
    project_id uuid,
    limit_count int DEFAULT 20
) RETURNS TABLE (
    frame_id uuid,
    similarity float
) AS $$
    SELECT id, 1 - (embedding <=> query_embedding) as similarity
    FROM frames
    WHERE project_id = $2
    ORDER BY embedding <=> query_embedding
    LIMIT $3;
$$ LANGUAGE SQL;
```

---

## ãƒªã‚¹ã‚¯ã¨å¯¾ç­–

| ãƒªã‚¹ã‚¯ | å½±éŸ¿ | å¯¾ç­– |
|-------|------|------|
| GPU ç’°å¢ƒæ§‹ç¯‰ã®è¤‡é›‘ã• | é–‹ç™ºé…å»¶ | Docker ã§ç’°å¢ƒã‚’å®Œå…¨ã«ã‚³ãƒ³ãƒ†ãƒŠåŒ– |
| SigLIP 2 æœªçµŒé¨“ | å­¦ç¿’ã‚³ã‚¹ãƒˆ | HuggingFace ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ã‚µãƒ³ãƒ—ãƒ«ã‚’æ´»ç”¨ |
| SAM 3 API å¤‰æ›´ | å®Ÿè£…ä¿®æ­£ | r2s2 ã®å‹•ä½œç¢ºèªæ¸ˆã¿ã‚³ãƒ¼ãƒ‰ã‚’ãƒ™ãƒ¼ã‚¹ã« |
| VRAM ä¸è¶³ | å®Ÿè¡Œã‚¨ãƒ©ãƒ¼ | ãƒ¢ãƒ‡ãƒ«ã‚µã‚¤ã‚ºã®é¸æŠè‚¢ã‚’ç”¨æ„ |
| ~~ä¾å­˜é–¢ä¿‚ã®è¡çª~~ | ~~å®Ÿè¡Œã‚¨ãƒ©ãƒ¼~~ | âœ… **è§£æ±ºæ¸ˆã¿**: SigLIP/SAM3 ã‚’åˆ†é›¢ã‚³ãƒ³ãƒ†ãƒŠã§å®Ÿè¡Œ |

---

## å‚ç…§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### SigLIP 2
- [SigLIP 2 è«–æ–‡ (arXiv)](https://arxiv.org/pdf/2502.14786)
- [HuggingFace Blog - SigLIP 2](https://huggingface.co/blog/siglip2)
- [HuggingFace Docs - SigLIP](https://huggingface.co/docs/transformers/en/model_doc/siglip)

### SAM 3
- [SAM 3 GitHub](https://github.com/facebookresearch/sam3)
- r2s2 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: `/home/hexyl/workspace/r2s2/simulator/docs/SAM3_SAM3D_REFERENCE.md`

### pgvector
- [pgvector GitHub](https://github.com/pgvector/pgvector)
- [Supabase Vector](https://supabase.com/docs/guides/ai/vector-columns)

---

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. ã“ã®è¨ˆç”»ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨æ‰¿èª
2. GitHub Issue ã®ä½œæˆ (2.1 ~ 2.11)
3. Phase 2 ç”¨ Milestone ä½œæˆ
4. GPU ç’°å¢ƒæ§‹ç¯‰ã‹ã‚‰ç€æ‰‹
